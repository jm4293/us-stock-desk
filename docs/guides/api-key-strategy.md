# λ°μ΄ν„° μ†μ¤ μ „λµ

## π“‹ κ°μ”

Stock Deskλ” λ‘ κ°€μ§€ μ™Έλ¶€ λ°μ΄ν„° μ†μ¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤:

1. **Finnhub** - μ‹¤μ‹κ°„ μ£Όμ‹ κ°€κ²© (μ„λ²„ μΈ΅ ν”„λ΅μ‹ μ²λ¦¬)
2. **Yahoo Finance** - μ°¨νΈ OHLCV λ°μ΄ν„° (λ¬΄λ£, API ν‚¤ λ¶ν•„μ”)

**λ¨λ“  μ‚¬μ©μλ” λ³„λ„μ API ν‚¤ λ°κΈ‰ μ—†μ΄ μ‹¤μ‹κ°„ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.**

---

## π“΅ λ°μ΄ν„° μ†μ¤λ³„ μ—­ν• 

### 1. Finnhub - μ‹¤μ‹κ°„ μ£Όμ‹ κ°€κ²© + μ°¨νΈ λ°μ΄ν„°

- **μ©λ„**: ν„μ¬κ°€, λ“±λ½λ¥ , κ±°λλ‰ λ“± μ‹¤μ‹κ°„ Quote λ°μ΄ν„° λ° μ°¨νΈ OHLCV λ°μ΄ν„°
- **μ—”λ“ν¬μΈνΈ**: `/api/stock-proxy` (Vercel Serverless Function)
- **API ν‚¤ κ΄€λ¦¬**: μ„λ²„ ν™κ²½λ³€μ(`FINNHUB_API_KEY`)λ΅ κ΄€λ¦¬, ν΄λΌμ΄μ–ΈνΈμ— λ…Έμ¶ μ—†μ
- **μ‚¬μ©μ μ΅°μ‘ ν•„μ” μ—†μ**: λ°°ν¬λ μ„λΉ„μ¤μ—μ„ μλ™μΌλ΅ μ²λ¦¬λ¨
- **λ°μ΄ν„° λ°©μ‹**: WebSocket (μ‹¤μ‹κ°„) + REST API Polling (Fallback) + Candle API (μ°¨νΈ)

```
μ‚¬μ©μ β†’ /api/stock-proxy β†’ Finnhub API (μ„λ²„μ—μ„ ν‚¤ μ‚¬μ©)
μ‚¬μ©μ β†’ Finnhub WebSocket (μ‹¤μ‹κ°„ κ°€κ²©)
```

> **μ°Έκ³ **: μ΄κΈ° κ³„νμ Yahoo Finance μ°¨νΈ λ°μ΄ν„°λ” Finnhub Candle APIλ΅ ν†µν•©λμ—μµλ‹λ‹¤.

---

## π μ‚¬μ©μ κ²½ν—

λ¨λ“  μ‚¬μ©μλ” λ™μΌν• μ΅°κ±΄μΌλ΅ μ„λΉ„μ¤λ¥Ό μ΄μ©ν•©λ‹λ‹¤:

- API ν‚¤ λ°κΈ‰ λ¶ν•„μ”
- νμ›κ°€μ… λ¶ν•„μ”
- μ‹¤μ‹κ°„/μ ν• λ¨λ“ κµ¬λ¶„ μ—†μ
- λ¨λ“  κΈ°λ¥ μ¦‰μ‹ μ‚¬μ© κ°€λ¥

---

## π”’ λ³΄μ• κ³ λ ¤μ‚¬ν•­

### API ν‚¤ κ΄€λ¦¬ (μ„λ²„ μΈ΅)

- Finnhub API ν‚¤λ” Vercel ν™κ²½λ³€μλ΅λ§ κ΄€λ¦¬
- ν΄λΌμ΄μ–ΈνΈ λ²λ“¤μ— API ν‚¤ ν¬ν•¨λμ§€ μ•μ
- HTTPS ν†µμ‹ λ§ ν—μ©

### κ°λ° ν™κ²½

κ°λ°μκ°€ λ΅μ»¬μ—μ„ μ‹¤ν–‰ν•  κ²½μ° `.env.local` νμΌμ— ν‚¤λ¥Ό μ„¤μ •ν•΄μ•Ό ν•©λ‹λ‹¤:

```env
# .env.local (κ°λ°μ μ „μ©, μΌλ° μ‚¬μ©μλ” λ¶ν•„μ”)
FINNHUB_API_KEY=your_api_key_here
```

Vercel λ°°ν¬ ν™κ²½μ—μ„λ” Vercel λ€μ‹λ³΄λ“μ—μ„ ν™κ²½λ³€μλ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤.

---

## π“ λ°μ΄ν„° μ—…λ°μ΄νΈ μ „λµ

### μ‹¤μ‹κ°„ κ°€κ²© (Finnhub)

```
WebSocket (1μ°¨)
  β†’ wss://ws.finnhub.io?token=...
  β†’ μ‹¤μ‹κ°„ κ°€κ²© push

REST API Polling Fallback (μ„¤μ •μ— λ”°λΌ 5μ΄ / 10μ΄ / 30μ΄ κ°„κ²©)
  β†’ /api/stock-proxy?symbol=AAPL&type=quote
  β†’ ν„μ¬κ°€, λ“±λ½λ¥ , κ±°λλ‰ κ°±μ‹ 
```

### μ°¨νΈ λ°μ΄ν„° (Finnhub Candle API)

```
REST API Polling
  β†’ /api/stock-proxy?symbol=AAPL&type=candle&resolution=D&from=...&to=...
  β†’ κΈ°κ°„λ³„ OHLCV λ°μ΄ν„° (1μΌ, 1μ£Ό, 1κ°μ›”, 3κ°μ›”, 6κ°μ›”, 1λ…„)
```

---

## π« μ κ±°λ κΈ°λ¥

κΈ°μ΅΄ κ³„νμ— μλ μ•„λ κΈ°λ¥λ“¤μ€ κµ¬ν„ν•μ§€ μ•μµλ‹λ‹¤:

- "μ ν• λ¨λ“" / "μ‹¤μ‹κ°„ λ¨λ“" κµ¬λ¶„
- μ‚¬μ©μμ κ°μΈ API ν‚¤ μ…λ ¥ λ° κ²€μ¦
- μ„¤μ • λ¨λ‹¬μ API ν‚¤ μ…λ ¥ μ„Ήμ…
- ν—¤λ”μ API ν‚¤ μƒνƒ ν‘μ‹ (μ‹¤μ‹κ°„/μ ν• λ°°μ§€)

---

**μ‘μ„±μΌ**: 2026-02-16
